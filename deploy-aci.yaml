apiVersion: 2019-12-01
location: westeurope
name: jaysgame
properties:
  containers:
    - name: gameclient
      properties:
        image: jayjuk/gameclient
        resources:
          requests:
            cpu: 1
            memoryInGb: 1.5
        ports:
          - port: 3000
    - name: gameserver
      properties:
        environmentVariables:
          - name: "OPENAI_API_KEY"
            value: "${OPENAI_API_KEY}"
          - name: "AZURE_STORAGE_ACCOUNT_NAME"
            value: "${AZURE_STORAGE_ACCOUNT_NAME}"
          - name: "AZURE_STORAGE_ACCOUNT_KEY"
            value: "${AZURE_STORAGE_ACCOUNT_KEY}"
        image: jayjuk/gameserver
        resources:
          requests:
            cpu: 1
            memoryInGb: 1.5
        ports:
          - port: 3001
    - name: imageserver
      properties:
        environmentVariables:
          - name: "GAMESERVER_HOSTNAME"
            value: "jaysgame.westeurope.azurecontainer.io"
          - name: "AZURE_STORAGE_ACCOUNT_NAME"
            value: "${AZURE_STORAGE_ACCOUNT_NAME}"
          - name: "AZURE_STORAGE_ACCOUNT_KEY"
            value: "${AZURE_STORAGE_ACCOUNT_KEY}"
        image: jayjuk/imageserver
        resources:
          requests:
            cpu: 1
            memoryInGb: 1.5
        ports:
          - port: 5000
    - name: aibroker
      properties:
        environmentVariables:
          - name: "AI_COUNT"
            value: "${AI_COUNT}"
          - name: "OPENAI_API_KEY"
            value: "${OPENAI_API_KEY}"
          - name: "GAMESERVER_HOSTNAME"
            value: "jaysgame.westeurope.azurecontainer.io"
        image: jayjuk/aibroker
        resources:
          requests:
            cpu: 1
            memoryInGb: 1.5
  osType: Linux
  ipAddress:
    type: Public
    dnsNameLabel: jaysgame
    ports:
      - port: 3000
      - port: 3001
tags: { exampleName: exampleValue }
type: Microsoft.ContainerInstance/containerGroups
